#!/usr/bin/env bash
# Configuration d'un serveur Ubuntu pour :
# localhost résout vers 127.0.0.2
# facebook.com résout vers 8.8.8.8

# Sauvegarder le fichier hosts original
cp /etc/hosts /etc/hosts.backup

# Remplacer 127.0.0.1 localhost par 127.0.0.2 localhost dans le fichier /etc/hosts
# sed -i = modifier le fichier directement
# 's/ancien/nouveau/' = substituer "ancien" par "nouveau"
sed -i 's/127.0.0.1.*localhost/127.0.0.2 localhost/' /etc/hosts

# Ajouter facebook.com qui résout vers 8.8.8.8
# >> = ajouter à la fin du fichier sans écraser le contenu existant
echo "8.8.8.8 facebook.com" >> /etc/hosts

echo "Configuration terminée :"
echo "- localhost résout maintenant vers 127.0.0.2"
echo "- facebook.com résout maintenant vers 8.8.8.8"
